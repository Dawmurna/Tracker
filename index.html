<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Onamma üíò</title>
  <style>
    :root{
      --bg1:#0b0b12;
      --bg2:#1a1024;
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.7);
      --accent:#ff4da6;
      --accent2:#7c4dff;
      --shadow: 0 20px 80px rgba(0,0,0,.55);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(255,77,166,.18), transparent 60%),
        radial-gradient(1000px 700px at 80% 20%, rgba(124,77,255,.18), transparent 60%),
        radial-gradient(900px 700px at 50% 90%, rgba(34,197,94,.12), transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* floating hearts */
    .hearts{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.8;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.35));
    }
    .heart{
      position:absolute;
      animation: floatUp linear infinite;
      opacity:0;
      transform: translateY(30px) scale(.9);
    }
    @keyframes floatUp{
      0%{ opacity:0; transform:translateY(40px) scale(.8); }
      10%{ opacity:.95; }
      100%{ opacity:0; transform:translateY(-120vh) scale(1.4); }
    }

    .wrap{
      width:min(720px, 92vw);
      position:relative;
      z-index:2;
    }

    .card{
      background: linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid var(--stroke);
      border-radius:24px;
      padding:28px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
    }

    .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
      margin-bottom:18px;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
      font-size:14px;
      color:var(--muted);
    }

    .badge .dot{
      width:10px; height:10px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--accent));
      box-shadow: 0 0 18px rgba(255,77,166,.6);
    }

    h1{
      margin:10px 0 6px;
      font-size: clamp(28px, 4vw, 44px);
      line-height:1.05;
      letter-spacing:-.02em;
    }

    .name{
      background: linear-gradient(90deg, var(--accent), #ffb3d9, var(--accent2));
      -webkit-background-clip:text;
      background-clip:text;
      color: transparent;
    }

    p{
      margin:0;
      color: var(--muted);
      font-size: 15.5px;
      line-height:1.55;
      white-space: pre-wrap;
    }

    .question{
      margin-top:18px;
      padding:18px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
    }

    .buttons{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin-top:16px;
      align-items:center;
      position:relative;
    }

    button{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--text);
      padding:12px 16px;
      border-radius:14px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      font-weight:650;
      letter-spacing:.2px;
    }
    button:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.12);
      border-color: rgba(255,255,255,.26);
    }

    .primary{
      background: linear-gradient(135deg, rgba(255,77,166,.35), rgba(124,77,255,.25));
      border-color: rgba(255,77,166,.35);
      position:relative;
    }
    .primary:hover{
      background: linear-gradient(135deg, rgba(255,77,166,.45), rgba(124,77,255,.35));
    }

    .alt{ border-color: rgba(124,77,255,.35); }
    .twist{
      border-color: rgba(34,197,94,.35);
      background: rgba(34,197,94,.10);
    }

    /* YES floating arrows wrapper */
    .yesWrapper{
      position:relative;
      display:inline-block;
    }

    /* Base orbit arrows (always visible) */
    .orbit, .extraOrbit{
      position:absolute;
      font-size:20px;
      pointer-events:none;
      opacity:.95;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
      user-select:none;
    }

    .orbit1{
      top:-30px; left:50%;
      transform: translateX(-50%);
      animation: floatDown 1.15s ease-in-out infinite;
    }
    .orbit2{
      bottom:-30px; left:50%;
      transform: translateX(-50%) rotate(180deg);
      animation: floatUp 1.15s ease-in-out infinite;
    }
    .orbit3{
      left:-36px; top:50%;
      transform: translateY(-50%);
      animation: floatRight 1.15s ease-in-out infinite;
    }
    .orbit4{
      right:-36px; top:50%;
      transform: translateY(-50%) rotate(180deg);
      animation: floatLeft 1.15s ease-in-out infinite;
    }

    @keyframes floatDown{
      0%,100%{ transform: translate(-50%,0); }
      50%{ transform: translate(-50%,6px); }
    }
    @keyframes floatUp{
      0%,100%{ transform: translate(-50%,0) rotate(180deg); }
      50%{ transform: translate(-50%,-6px) rotate(180deg); }
    }
    @keyframes floatRight{
      0%,100%{ transform: translate(0,-50%); }
      50%{ transform: translate(6px,-50%); }
    }
    @keyframes floatLeft{
      0%,100%{ transform: translate(0,-50%) rotate(180deg); }
      50%{ transform: translate(-6px,-50%) rotate(180deg); }
    }

    /* Extra arrows (hidden until swarmActive) */
    .extraOrbit{
      opacity:0;
      animation: swarm 1.05s ease-in-out infinite;
    }
    @keyframes swarm{
      0%,100%{ transform: translate(0,0) rotate(0deg); }
      50%{ transform: translate(6px,-6px) rotate(12deg); }
    }
    .yesWrapper.swarmActive .extraOrbit{
      opacity:1;
    }

    /* Arrow explosion on YES */
    .yesWrapper.pop .orbit,
    .yesWrapper.pop .extraOrbit{
      animation: arrowPop 420ms ease-out forwards !important;
    }
    @keyframes arrowPop{
      0%   { transform: translate(0,0) scale(1) rotate(0deg); opacity: 1; }
      60%  { transform: translate(var(--dx), var(--dy)) scale(1.6) rotate(18deg); opacity: 1; }
      100% { transform: translate(calc(var(--dx) * 1.2), calc(var(--dy) * 1.2)) scale(.7) rotate(25deg); opacity: 0; }
    }

    .footer{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top:16px;
      color: rgba(255,255,255,.55);
      font-size:12.5px;
      gap:12px;
      flex-wrap:wrap;
    }

    /* BIGGER "na by force?" */
    .status-warn{
      color:#ff3b3b !important;
      font-weight:900;
      font-size:20px;
      text-transform: uppercase;
      letter-spacing: 1.2px;
      text-shadow: 0 10px 22px rgba(0,0,0,.55);
    }

    /* overlay */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      place-items:center;
      padding:20px;
      z-index:6;
    }
    .overlay.show{ display:grid; }

    .modal{
      width:min(560px, 92vw);
      border-radius:22px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(16,16,28,.72);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      padding:22px;
      text-align:center;
    }
    .modal h2{
      margin:0 0 8px;
      font-size: clamp(22px, 3vw, 30px);
    }
    .modal p{ margin:0 0 14px; }
    .modal .mini{
      font-size:12.5px;
      opacity:.7;
      margin-top:10px;
    }
    .close{
      margin-top:10px;
      border-radius:14px;
      padding:11px 14px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--text);
      cursor:pointer;
    }

    /* confetti canvas */
    canvas{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:5;
    }

    /* typing effect */
    .typing{
      display:inline-block;
      border-right: 2px solid rgba(255,255,255,.85);
      padding-right:3px;
      animation: caret 0.7s steps(1) infinite;
      white-space: pre-wrap;
    }
    @keyframes caret{ 50%{ border-right-color: transparent; } }

    /* Tiny no now floats freely across the entire screen */
    .tinyNo{
      position:fixed;
      left:50%;
      top:50%;
      transform: translate(-50%, -50%);
      font-size:10px;
      padding:4px 6px;
      border-radius:999px;
      opacity:.65;
      background: rgba(255,255,255,.06);
      z-index:3;
    }
    .tinyNo:hover{ opacity:.95; }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="hearts" id="hearts"></div>

  <div class="wrap">
    <div class="card">
      <div class="top">
        <div class="badge">
          <span class="dot"></span>
          Valentine Protocol: <strong>Active</strong>
        </div>
      </div>

      <h1>Onamma, <span class="name">will you be my Valentine?</span> üíò</h1>
      <p>
I'm not as good at web design as you but I made this
cause asking you normally when you have been so special in my life didn't feel right.
      </p>

      <div class="question">
        <p><strong>Choose wisely.</strong> (There are no wrong answers. Except the tiny one. The tiny one is suspicious.)</p>

        <div class="buttons">
          <!-- YES + floating arrows around it -->
          <div class="yesWrapper" id="yesWrapper">
            <div class="orbit orbit1">üëâ</div>
            <div class="orbit orbit2">üëâ</div>
            <div class="orbit orbit3">üëâ</div>
            <div class="orbit orbit4">üëâ</div>

            <!-- extra arrows that appear after tiny no runs 3 times -->
            <div class="extraOrbit" style="top:-48px; left:12px;">üëâ</div>
            <div class="extraOrbit" style="top:-48px; right:12px;">üëâ</div>
            <div class="extraOrbit" style="bottom:-48px; left:12px;">üëâ</div>
            <div class="extraOrbit" style="bottom:-48px; right:12px;">üëâ</div>
            <div class="extraOrbit" style="top:50%; left:-68px;">üëâ</div>
            <div class="extraOrbit" style="top:50%; right:-68px;">üëâ</div>
            <div class="extraOrbit" style="top:-10px; left:-56px;">üëâ</div>
            <div class="extraOrbit" style="top:-10px; right:-56px;">üëâ</div>

            <button class="primary" id="yesBtn">Yes</button>
          </div>

          <button class="alt" id="siBtn">S√≠ (Yes in Spanish)</button>
          <button class="twist" id="twistBtn">No‚Ä¶ I‚Äôll be your Valentine</button>
        </div>

        <div class="footer">
          <span>Made with love + a little mischief.</span>
          <span id="status">Tip: try clicking the tiny ‚Äúno‚Äù üòà</span>
        </div>
      </div>
    </div>
  </div>

  <!-- The tiny "no" is now outside the card and moves around the whole screen -->
  <button class="tinyNo" id="tinyNoBtn" aria-label="tiny no">no</button>

  <div class="overlay" id="overlay">
    <div class="modal">
      <h2 id="modalTitle">Aaaa</h2>
      <p id="modalText">Text</p>
      <button class="close" id="closeBtn">Close</button>
      <div class="mini" id="miniText"></div>
    </div>
  </div>

  <script>
    // ------- Helpers -------
    const rand = (min, max) => Math.random() * (max - min) + min;

    // ------- Floating hearts background -------
    const heartsEl = document.getElementById("hearts");
    const heartChars = ["üíó","üíñ","üíò","üíû","üíì","üíù","üíï","‚ù§Ô∏è"];

    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = heartChars[Math.floor(Math.random() * heartChars.length)];
      h.style.left = rand(0, 100) + "vw";
      h.style.animationDuration = rand(6, 12) + "s";
      h.style.fontSize = rand(16, 34) + "px";
      h.style.animationDelay = rand(0, 2) + "s";
      heartsEl.appendChild(h);
      setTimeout(() => h.remove(), 14000);
    }
    setInterval(spawnHeart, 420);
    for(let i=0;i<10;i++) spawnHeart();

    // ------- Modal helpers -------
    const overlay = document.getElementById("overlay");
    const modalTitle = document.getElementById("modalTitle");
    const modalText = document.getElementById("modalText");
    const miniText = document.getElementById("miniText");
    const closeBtn = document.getElementById("closeBtn");
    const status = document.getElementById("status");

    function showModal(title, text, mini=""){
      modalTitle.textContent = title;
      modalText.textContent = text;
      miniText.textContent = mini;
      overlay.classList.add("show");
    }
    function hideModal(){
      overlay.classList.remove("show");
    }
    closeBtn.addEventListener("click", hideModal);
    overlay.addEventListener("click", (e)=>{ if(e.target === overlay) hideModal(); });

    // ------- Confetti -------
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let confetti = [];
    let confettiOn = false;

    function resize(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener("resize", resize);
    resize();

    // UPDATED: burstConfetti with intensity (bigger for YES)
    function burstConfetti(power = 1){
      confettiOn = true;
      confetti = [];
      const count = Math.floor(220 * power);
      for(let i=0;i<count;i++){
        confetti.push({
          x: rand(0, window.innerWidth),
          y: rand(-20, window.innerHeight * 0.35),
          vx: rand(-3.5 * power, 3.5 * power),
          vy: rand(2.5 * power, 8.5 * power),
          r: rand(2, 6),
          rot: rand(0, Math.PI*2),
          vr: rand(-0.25, 0.25),
          c: `hsl(${Math.floor(rand(0,360))} 90% 65%)`
        });
      }
    }

    function tick(){
      ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      if(confettiOn){
        confetti.forEach(p=>{
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          p.vy += 0.03;

          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.c;
          ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*2.2);
          ctx.restore();
        });

        confetti = confetti.filter(p => p.y < window.innerHeight + 30);
        if(confetti.length === 0) confettiOn = false;
      }
      requestAnimationFrame(tick);
    }
    tick();

    // ------- Buttons behavior -------
    const yesBtn = document.getElementById("yesBtn");
    const siBtn = document.getElementById("siBtn");
    const twistBtn = document.getElementById("twistBtn");
    const tinyNoBtn = document.getElementById("tinyNoBtn");
    const yesWrapper = document.getElementById("yesWrapper");

    const lines = {
      yes: [
        "Amazing üò≠",
        "You really said yes with zero pressure haha."
      ],
      si: [
        "Te amo‚Ä¶ for real üíò",
        "I remember when I wasn‚Äôt ready to say ‚ÄúI love you‚Äù yet, so I hid behind ‚ÄúTe amo.‚Äù\n\nBut you? You made love feel easy ‚Äî and somehow, it found me faster than I ever expected."
      ],
      twist: [
        "Be careful üôÇ",
        "Pick you up at 10?"
      ]
    };

    // Arrow explosion helper
    function explodeYesArrows(){
      const arrows = yesWrapper.querySelectorAll(".orbit, .extraOrbit");
      arrows.forEach(a => {
        const dx = (Math.random() * 160 - 80).toFixed(0) + "px";
        const dy = (Math.random() * 160 - 80).toFixed(0) + "px";
        a.style.setProperty("--dx", dx);
        a.style.setProperty("--dy", dy);
      });

      yesWrapper.classList.add("pop");

      setTimeout(() => {
        yesWrapper.classList.remove("pop");
      }, 520);
    }

    // UPDATED: YES = arrow explode + BIG confetti
    yesBtn.addEventListener("click", ()=>{
      explodeYesArrows();
      burstConfetti(1.9);
      status.classList.remove("status-warn");
      status.textContent = "‚úÖ Mission accomplished.";
      showModal(lines.yes[0], lines.yes[1], "Screenshot this. I‚Äôm framing it.");
    });

    twistBtn.addEventListener("click", ()=> {
      burstConfetti(1);
      status.classList.remove("status-warn");
      status.textContent = "‚úÖ Mission accomplished.";
      showModal(lines.twist[0], lines.twist[1], "Screenshot this. I‚Äôm framing it.");
    });

    // --- Typing effect for the Spanish "S√≠" message ---
    let typingTimer = null;

    function typeIntoModal(fullText){
      modalText.innerHTML = '<span class="typing" id="typingSpan"></span>';
      const span = document.getElementById("typingSpan");

      let i = 0;
      const speed = 22;

      if (typingTimer) clearInterval(typingTimer);
      typingTimer = setInterval(() => {
        i++;
        span.textContent = fullText.slice(0, i);
        if (i >= fullText.length) {
          clearInterval(typingTimer);
          setTimeout(() => span.classList.remove("typing"), 550);
        }
      }, speed);
    }

    siBtn.addEventListener("click", ()=>{
      burstConfetti(1.2);
      status.classList.remove("status-warn");
      status.textContent = "‚úÖ Mission accomplished.";
      overlay.classList.add("show");
      modalTitle.textContent = lines.si[0];
      miniText.textContent = "Screenshot this. I‚Äôm framing it.";
      typeIntoModal(lines.si[1]);
    });

    // ------- Tiny NO: bounce around the whole screen -------
    let noMoves = 0;
    let showedForceMsg = false;

    let noX = Math.floor(window.innerWidth * 0.75);
    let noY = Math.floor(window.innerHeight * 0.75);

    function placeTinyNo(x, y){
      const r = tinyNoBtn.getBoundingClientRect();
      const pad = 10;
      const w = r.width || 40;
      const h = r.height || 18;

      const minX = pad;
      const maxX = window.innerWidth - w - pad;
      const minY = pad;
      const maxY = window.innerHeight - h - pad;

      const clampedX = Math.max(minX, Math.min(maxX, x));
      const clampedY = Math.max(minY, Math.min(maxY, y));

      tinyNoBtn.style.left = clampedX + "px";
      tinyNoBtn.style.top = clampedY + "px";
      tinyNoBtn.style.transform = "none";

      noX = clampedX;
      noY = clampedY;
    }

    placeTinyNo(noX, noY);

    function getCenter(el){
      const r = el.getBoundingClientRect();
      return { cx: r.left + r.width/2, cy: r.top + r.height/2 };
    }

    function moveTinyNoFarFrom(mouseX, mouseY){
      const targetX = (mouseX < window.innerWidth/2)
        ? rand(window.innerWidth * 0.55, window.innerWidth * 0.95)
        : rand(window.innerWidth * 0.05, window.innerWidth * 0.45);

      const targetY = (mouseY < window.innerHeight/2)
        ? rand(window.innerHeight * 0.55, window.innerHeight * 0.95)
        : rand(window.innerHeight * 0.05, window.innerHeight * 0.45);

      tinyNoBtn.animate(
        [
          { transform: "scale(1) rotate(0deg)" },
          { transform: "scale(1.25) rotate(10deg)" },
          { transform: "scale(1) rotate(0deg)" }
        ],
        { duration: 220, easing: "cubic-bezier(.2,1,.2,1)" }
      );

      placeTinyNo(targetX, targetY);

      noMoves++;

      // UPDATED: after 3 moves => bigger "NA BY FORCE?" + arrow swarm activates
      if (noMoves >= 3 && !showedForceMsg) {
        showedForceMsg = true;

        status.textContent = "NA BY FORCE?";
        status.classList.add("status-warn");

        // arrows multiply around YES
        yesWrapper.classList.add("swarmActive");

        setTimeout(() => {
          if (!overlay.classList.contains("show")) {
            status.classList.remove("status-warn");
            status.textContent = "Tip: try clicking the tiny ‚Äúno‚Äù üòà";
          }
        }, 1400);
      }
    }

    window.addEventListener("mousemove", (e) => {
      const info = getCenter(tinyNoBtn);
      const d = Math.hypot(e.clientX - info.cx, e.clientY - info.cy);
      const threshold = 110;

      if (d < threshold && !overlay.classList.contains("show")) {
        moveTinyNoFarFrom(e.clientX, e.clientY);
      }
    });

    tinyNoBtn.addEventListener("click", ()=>{
      burstConfetti(1);
      showModal(
        "Nice try üò≠",
        "You dey crase?",
        "Now choose: Yes or S√≠ üòå"
      );
    });

    window.addEventListener("resize", ()=>{
      placeTinyNo(noX, noY);
    });
  </script>
</body>
</html>
